# Parcel template

Проект створений за допомогою Parcel.
Для ознайомлення і налаштування додаткових можливостей [див.](https://parceljs.org/).

## Підготовка нового проекту

1. Переконайся, що на компʼютері встановлена LTS-версія Node.js.
   [Скачати](https://nodejs.org/en/), якщо необхідно.
2. Склонуй даний репозиторій.
3. Зміни імʼя папки з `parcel-project-template` на імʼя твого проекта.
4. Створи новий пустий репозиторій на GitHub.
5. Відкрий проект у VSCode, запусти термінал і звʼяжи проект з GitHub-репозиторієм
   [див. інструкцію](https://docs.github.com/en/get-started/getting-started-with-git/managing-remote-repositories#changing-a-remote-repositorys-url).
6. Встанови залежності проекта командою `npm install` у терміналі .
7. Запусти режим розробки командою `npm start`.
8. Перейди у браузері за адресою [http://localhost:1234](http://localhost:1234).
   Сторінка будет автоматично перезавантажуватися після збереження змін у файлах проекта.

## Файли і папки

- Усі паршали файлів стилів повинні розміщуватися у папці `src/sass` та імпортуватися у файли стилів сторінки.
  Наприклад, для `index.html` файл стилів називається `index.scss`.

- Зображення добавляй у папку `src/images`. Збірник оптимізує їх, але лише при Deploy Production версії проекта.
  Усе це відбувається в cloud, щоб не навантажувати компʼютер.

## Deploy

Для налаштування Deploy проекта необхідно виконати декілька додаткових кроків:
`Settings` -> `Actions` -> `General`.

![GitHub actions settings](./assets/actions-config-step-1.png)

Прогорни сторінку до останньої секції, і переконайся, що там відмічені опції, як на наступному малюнку і нажми `Save`.
Без цих налаштувань у збірки не буде достатньо прав для автоматизації процесу Deploy.

![GitHub actions settings](./assets/actions-config-step-2.png)

Production версія проекта буде автоматично збиратися і деплоїтися на GitHub Pages у гілку `gh-pages`, щоразу при оновлені гілки `main`. Наприклад, після прямого пуша або прийнятого пул-реквеста. Для цього необхідно у файлі `package.json` відредагувати поле `homepage` і скрипт `build`, замінивши `your_username` і `your_repo_name` на свої, і відправити зміни на GitHub.

```json
"homepage": "https://your_username.github.io/your_repo_name/",
"scripts": {
  "build": "parcel build src/*.html --public-url /your_repo_name/"
},
```

Далі необхідно зайти до налаштувань GitHub-репозиторія (`Settings` > `Pages`) і виставити роздачу Production версії файлів з папки `/root` гілки `gh-pages`, якщо це не було зроблено автоматично.

![GitHub Pages settings](./assets/repo-settings.png)

### Статус Deploy

Статус Deploy останнього коміта відображаєтсья іконкою біля його ідентифікатора.

- **Жовтий колір** - Deploy виконується.
- **Зелений колір** - Deploy завершено успішно.
- **Червоний колір** - Deploy не виконано.

Більш детальну інформацію про статус Deploy можна переглянути натиснувши на іконку і перейшовши за посиланням `Details`.

![Deployment status](./assets/status.png)

### Жива сторінка

Через певний час, зазвичай пару хвилин, живу сторінку можно буде побачити за адресою, яка вказана у відредагованій властивості `homepage`.

Якщо відкривається порожня сторінка, переконайся, що у вкладці `Console` немає помилок, які повяʼязані з неправильними шляхами до CSS і JS файлів проекта (**404**). Швидше за все в тебе неправильне значення властивості `homepage` або скрипта `build` у файлі `package.json`.

## Як це працює

![How it works](./assets/how-it-works.png)

1. Після кожного пуша у гілку `main` GitHub-репозиторія, запускається спеціальний скрипт (GitHub Action) із файла `.github/workflows/deploy.yml`.
2. Усі файли репозиторія копіюються на сервер, де проект ініціалізується і проходить збірку перед Deploy.
3. Якщо всі кроки пройшли успішно, зібрана Production версія файлів проекта відправляється до гілки `gh-pages`. В іншому випадку, в лозі виконання скрипта буде повідомлено про помилку.
